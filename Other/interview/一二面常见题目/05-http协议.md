# HTTP协议的考点

- 1.http协议的主要特点
- 2.http协议的主要组成
- 3.http协议的常见方法
- 4.http协议的常见状态码
- 5.http协议get和post的区别
- 6.http的缓存相关字段，分级缓存策略
- 7.什么是http协议的持久链接
- 8.https的实现过程，交互过程，画一下https和浏览器的交互认证过程
- 9.https是什么？为什么https比较安全，中间的加密过程是什么样的
- 10.http2.0和之前的区别是什么

> 1.http协议的主要特点

无状态的,就是客户端向服务端发起一次请求之后，再次发起第二次请求，服务端无法识别客户端是哪个客户。

> 2.http协议的主要组成

- 请求报文
    + 请求行
    + 请求头
    + 请求体
- 响应报文
    + 响应状态行
    + 响应头
    + 响应体

```
 请求行包含 : 请求方法 、 请求地址 、 HTTP协议版本号
 请求头包含 : 很多的keyvalue值,告诉服务器我要什么
 
 状态行包含:  状态码、 HTTP协议版本号 、 状态信息OK
 响应头包含:  很多键值对、一些服务器的信息
```

> 3.http协议的常见方法

- GET
- POST
- PUT
- DELETE
- OPTION

> 4.http协议的常见状态码

- 200
- 206

- 301 永久重定向
- 302 临时重定向
- 304 浏览器有缓存

- 400 客户端有语法错误
- 403 
- 404

- 500

> 5.http协议get和post的区别

- get请求会自动缓存在浏览器，Post请求不会
- get请求有长度限制，太长会被浏览器截断。post没有，或者比get可以传更多参数。
- get请求通过url传递参数，post的参数放在请求体中

> 6.http的缓存相关字段，分级缓存策略



- 我们在http请求头里设置cache-control字段，一般会设置max-age，这是相对时间，在这个时间之内表示缓存没有过期，就不会发起请求
- expire，因为cache-control是HTTP1.1出现，比expire更晚，所以两个字段都有的话，以cache-control优先级更高。
- 如果cache-control或者expire设置的缓存时间过期了，浏览器的强缓存过期了，就会去找响应头里的Etag或者Last-modified，并把etag和Last-modified对应的字段，放到请求头里传给服务器，服务器根据这个判断，是返回200，304(比较hash值，返回304的话，就读取本地缓存)
- etag和if-modified比较相似,区别是etag优先级更高,并且它是用hash值,判断文件是否有变动。这个比根据文件修改时间更靠谱。


cache-control的几个参数情况

- no-store :  不缓存
- no-cache : 不要强缓存，每次都走协商缓存
- max-age : 设置max-age 就是设置浏览器的缓存时间  （private）
- s-max-age : 设置x-max-age 是设置的代理服务器、CDN服务器的缓存时间(public)
- private: 私有
- public: 公有

request和respose都可以有cache-control字段

- request里的cache-control:no-cache表示本地没有缓存数据
- response中的 Cache-Control:max-age=259200 是通知浏览器：259200 秒之内别来烦我，自己从缓冲区中刷新


> 7.什么是http协议的持久链接

http1.1以上版本，支持keep-alive模式，就是开启持久链接模式


### HTTPS 以及 HTTP2.0

*** HTTP有什么安全问题 ***

- 1.明文传输。HTTP采用明文传输信息
- 2.无法验证身份。HTTP没有验证通信人的身份，可以有身份伪造的情况
- 3.无法验证报文完整性。HTTP无法验证HTTP报文的完整性，如果中途被修改了，无法察觉。

*** 解决问题1: ***

解决明文问题，就是加密。

- 对通信加密。通过增加ssl层，也就是HTTPS建立安全的通信线路，
- 对通信的报文加密。因为跟HTTPS不一样是，这种加密不是构建一个安全的通信线路，内容可能无法被解读，但是依旧可能被篡改。


*** 解决问题2: ***

默认情况下，没有验证身份，可能导致很多问题

- 有可能是伪造的客户端
- 有可能客户端收到的信息，是伪造的服务端返回的
- 无意义的大量请求，也可能被服务器接受处理

解决方法就是,通过证书来确认双方是实际存在的

- 客户端的开始通信之前先确认服务器的证书，因为第三方证书是值得信赖的，而且从技术上伪造证书也比较困难的

*** 解决问题3: ***

HTTP协议是没有办法验证，中途这个报文内容是否有被篡改的中间人攻击，被修改了用户也是无法察觉的。

有一些防止篡改的方法，比如用MD5确认文件的数字签名。但是MD5如果被修改，用户也是没法意识到的。

那么用HTTPS，单靠HTTPS也无法确保完整性。所以为了解决上面所拥有问题，需要HTTPS配合其他协议组合，实现安全的目标

#### HTTPS = HTTP +  加密 + 认证 + 完整性保护

《图解HTTP》第七章，有一页写了客户端和服务端HTTPS交互过程的是12个步骤。

我觉得背下来这12个步骤和细节的意义不大。我就用自己的理解总结了一下。


加密方式有很多种

- 公开密钥加密（SSL层采用的就是公开密钥） : 有一对配套的公有密钥和私有密钥
- 共享密钥加密 : 加密和解密都用同一个密钥

共享密钥加密的问题，在于如何安全的把密钥传递过去,而且还存在一个悖论，就是你既然能安全的把密钥传递，那为什么不直接把数据安全的传递过去，不就完事了吗？

公开密钥加密就可以解决上述问题,公开密钥加密的通信方式时，你如果要发送信息给我，你就把我的公有密钥加密之后发给我，我用私有密钥解密。

这个过程里，我的私有密钥始终都在我自己手里，是很安全的。


- 1 HTTPS的加密方式，实际上是混合加密
因为公有密钥加密的处理效率比较低的，比共享加密效率低，所以在一开始交互密钥的时候，可以用空开密钥加密，之后的通信都用共享密钥加密。
- 2 HTTPS通过证书来证明公开密钥的正确性。服务器会把第三方机构的那个证书，发给客户端。客户端根据这个证书，可以保证、判断这公有密钥的正确性        
- 3 HTTPS在交互过程中，应用层发送数据时会附加一种MAC的报文摘要，MAC可以查到报文是否有篡改，从而保证报文的完整性                                                                                                                               
                                                                                                                                        







> 8.https的实现过程，交互过程，画一下https和浏览器的交互认证过程

> 9.https是什么？为什么https比较安全，中间的加密过程是什么样的

> 10.http2.0和之前的区别是什么

HTTP1.1是1999年发布，很难说它是最合适协议，HTTP2.0主要目的是提升访问web站点速度体验。

现阶段围绕http2.0七大项技术的讨论还在持续，